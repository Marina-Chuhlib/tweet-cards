{"version":3,"file":"static/js/616.a8bbab1e.chunk.js","mappings":"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","sources":["shared/instance.js","webpack://tweet-cards/./src/modules/Tweets/TweetCard/TweetCard.module.css?ce5f","modules/Tweets/TweetCard/TweetCard.jsx","shared/toastify.js","webpack://tweet-cards/./src/modules/Tweets/Tweets.module.css?8b67","modules/Tweets/Tweets.jsx","pages/TweetsPage.jsx"],"sourcesContent":["import axios from 'axios';\nconst instance = axios.create({\n  baseURL: 'https://647874fa362560649a2dceb2.mockapi.io/app',\n});\n\nexport default instance;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"TweetCard_container__HTe-U\",\"logoWrapper\":\"TweetCard_logoWrapper__myEC6\",\"logo\":\"TweetCard_logo__9HGMq\",\"tweetWrapper\":\"TweetCard_tweetWrapper__+1ZXt\",\"picture\":\"TweetCard_picture__b6gyj\",\"circle\":\"TweetCard_circle__j+W6B\",\"avatar\":\"TweetCard_avatar__fyn9Z\",\"text\":\"TweetCard_text__FJsS1\",\"btn\":\"TweetCard_btn__umjXM\",\"followingBtn\":\"TweetCard_followingBtn__vvGbI\",\"followBtn\":\"TweetCard_followBtn__7bgRK\"};","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport instance from 'shared/instance';\n\nimport canvas from '../../../img/picture.png';\nimport logo from '../../../img/logo.png';\n\nimport css from './TweetCard.module.css';\n\nconst TweetCard = ({\n  user: { id, avatar, tweets, followers, isFollowers },\n  setUsers,\n  activeFilter,\n}) => {\n  const [value, setValue] = useState(followers);\n  const text = isFollowers ? 'Following' : 'Follow';\n  const [texBtn, setTextBtn] = useState(text);\n  const [isFollow, setIsFollow] = useState(isFollowers);\n\n  const formatted = value.toLocaleString('en-US', { useGrouping: true });\n\n  const handleClick = () => {\n    const updatedValue = isFollow === true ? false : true;\n    const newValue = isFollow === true ? value - 1 : value + 1;\n\n    setIsFollow(updatedValue);\n    setValue(newValue);\n    fetchUpdateTweet(id, newValue, updatedValue);\n    toggleButton();\n    return;\n  };\n\n  const fetchUpdateTweet = async (id, value, isFollow) => {\n    try {\n      const { data } = await instance.put(`/tweets/${id}`, {\n        followers: value,\n        isFollowers: isFollow,\n      });\n\n      setUsers(prevUsers =>\n        prevUsers\n          .map(user => {\n            if (user.id === id) {\n              if (\n                activeFilter &&\n                (activeFilter === 'following' || activeFilter === 'follow')\n              ) {\n                return null;\n              } else {\n                return {\n                  ...user,\n                  followers: value,\n                  isFollowers: isFollow,\n                };\n              }\n            }\n\n            return user;\n          })\n          .filter(user => user !== null)\n      );\n\n      if (!data) {\n        throw new Error();\n      }\n\n      return data;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const toggleButton = () => {\n    const text = !isFollow ? 'Following' : 'Follow';\n    setTextBtn(text);\n    return;\n  };\n\n  const styles = texBtn === 'Following' ? css.followingBtn : css.followBtn;\n\n  return (\n    <div className={css.container}>\n      <img src={logo} alt=\"\" className={css.logo} />\n      <div className={css.logoWrapper}>\n        <img src={canvas} alt=\"canvas\" className={css.picture} />\n      </div>\n      <div className={css.tweetWrapper}>\n        <div className={css.circle}>\n          <img src={avatar} alt=\"avatar\" className={css.avatar} />\n        </div>\n        <p className={css.text}>Tweets: {tweets}</p>\n        <p>Followers: {formatted}</p>\n        <button\n          type=\"button\"\n          onClick={handleClick}\n          className={`${css.btn} ${styles}`}\n        >\n          {texBtn}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default TweetCard;\n\nTweetCard.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    avatar: PropTypes.string.isRequired,\n    tweets: PropTypes.number.isRequired,\n    followers: PropTypes.number.isRequired,\n    isFollowers: PropTypes.bool.isRequired,\n  }).isRequired,\n};\n","import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst infoStyle = {\n  background: '#b99ec0',\n  color: '#5f269c',\n  borderRadius: '40px',\n  fontSize: '16px',\n};\n\nexport const toastInfo = message => {\n  toast.info(message, {\n    style: infoStyle,\n  });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"visuallyHidden\":\"Tweets_visuallyHidden__ElQjf\",\"container\":\"Tweets_container__RnaMC\",\"filter\":\"Tweets_filter__XNgWz\",\"filterBtn\":\"Tweets_filterBtn__Be09f\",\"list\":\"Tweets_list__Dxo1A\",\"item\":\"Tweets_item__Siz+d\",\"button\":\"Tweets_button__WI2ak\",\"select\":\"Tweets_select__EW91W\",\"notification\":\"Tweets_notification__VqpkU\",\"loadMoreBtn\":\"Tweets_loadMoreBtn__9EFym\",\"goBackBtn\":\"Tweets_goBackBtn__hzANB\"};","import { useEffect, useState, useRef } from 'react';\nimport instance from 'shared/instance';\nimport { useNavigate } from 'react-router-dom';\n\nimport Loader from 'shared/Loader/Loader';\nimport TweetCard from './TweetCard/TweetCard';\n\nimport * as toasty from '../../shared/toastify';\n\nimport css from './Tweets.module.css';\n\nconst Tweets = () => {\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasPage, setHasPage] = useState(true);\n  const [activeFilter, setActiveFilter] = useState('');\n  const lastCardRef = useRef(null);\n\n  const navigate = useNavigate();\n\n  const getUsers = async page => {\n    try {\n      setIsLoading(true);\n      const { data: users } = await instance.get('/tweets', {\n        params: {\n          completed: false,\n          limit: 3,\n          page: page,\n        },\n      });\n      if (page === 1) {\n        setUsers(users);\n      }\n      return users;\n    } catch (error) {\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getUsers(1);\n  }, []);\n\n  useEffect(() => {\n    if (lastCardRef.current) {\n      lastCardRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [currentPage]);\n\n  const loadMoreBtn = async () => {\n    const nextPage = currentPage + 1;\n    setIsLoading(true);\n    const newUsers = await getUsers(nextPage);\n    setUsers([...users, ...newUsers]);\n    setIsLoading(false);\n    setCurrentPage(nextPage);\n    if (newUsers.length === 0) {\n      setHasPage(false);\n      return;\n    }\n  };\n\n  const followingFilter = async () => {\n    const getAllUsers = await getUsers();\n    const followers = getAllUsers.filter(user => user.isFollowers === true);\n    if (followers.length === 0) {\n      return toasty.toastInfo('Following list empty');\n    }\n    setActiveFilter('following');\n    return setUsers(followers);\n  };\n\n  const followFilter = async () => {\n    const getAllUsers = await getUsers();\n    const followers = getAllUsers.filter(user => user.isFollowers !== true);\n    if (followers.length === 0) {\n      return toasty.toastInfo('Follow list empty');\n    }\n    setActiveFilter('follow');\n\n    return setUsers(followers);\n  };\n\n  const allTweetsFilter = async () => {\n    const allUsers = await getUsers();\n    setUsers(allUsers);\n    setHasPage(false);\n    setActiveFilter('allTweets');\n    return;\n  };\n\n  const goBackBtn = () => {\n    navigate('/');\n  };\n\n  return (\n    <>\n      <section className={css.container}>\n        {isLoading && <Loader />}\n        <h2 className={css.visuallyHidden}>Tweets</h2>\n\n        {users.length > 0 && !isLoading && (\n          <div className={css.cardWrapper}>\n            <ul className={css.list}>\n              {users.map((user, index) => {\n                const isLastCard = index === users.length - 1;\n                return (\n                  <li\n                    key={user.id}\n                    className={css.item}\n                    ref={isLastCard ? lastCardRef : null}\n                  >\n                    <TweetCard\n                      user={user}\n                      id={user.id}\n                      setUsers={setUsers}\n                      activeFilter={activeFilter}\n                    />\n                  </li>\n                );\n              })}\n            </ul>\n            {hasPage && !activeFilter ? (\n              <>\n                <button onClick={loadMoreBtn} className={css.loadMoreBtn}>\n                  Load more tweets\n                </button>\n              </>\n            ) : (\n              <p className={css.notification}>Reached the end of the list</p>\n            )}\n            <button onClick={goBackBtn} className={css.goBackBtn}>\n              Back\n            </button>\n          </div>\n        )}\n\n        <div className={css.filter}>\n          <button\n            onClick={followingFilter}\n            className={`${css.filterBtn} ${\n              activeFilter === 'following' ? 'active' : ''\n            }`}\n          >\n            Show following\n          </button>\n          <button\n            onClick={followFilter}\n            className={`${css.filterBtn} ${\n              activeFilter === 'follow' ? 'active' : ''\n            }`}\n          >\n            Show Follow\n          </button>\n          <button\n            onClick={allTweetsFilter}\n            className={`${css.filterBtn} ${\n              activeFilter === 'allTweets' ? 'active' : ''\n            }`}\n          >\n            Show all tweets\n          </button>\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default Tweets;\n","import Tweets from 'modules/Tweets/Tweets';\n\nconst TweetsPage = () => {\n  return (\n    <>\n      <Tweets />\n    </>\n  );\n};\n\nexport default TweetsPage;\n"],"names":["axios","baseURL","user","id","avatar","tweets","followers","isFollowers","setUsers","activeFilter","useState","value","setValue","text","texBtn","setTextBtn","isFollow","setIsFollow","formatted","toLocaleString","useGrouping","fetchUpdateTweet","instance","data","prevUsers","map","filter","Error","console","error","toggleButton","styles","css","className","src","alt","type","onClick","updatedValue","newValue","infoStyle","background","color","borderRadius","fontSize","toastInfo","message","toast","style","users","isLoading","setIsLoading","currentPage","setCurrentPage","hasPage","setHasPage","setActiveFilter","lastCardRef","useRef","navigate","useNavigate","getUsers","page","params","completed","limit","useEffect","current","scrollIntoView","behavior","loadMoreBtn","nextPage","newUsers","length","followingFilter","getAllUsers","toasty","followFilter","allTweetsFilter","allUsers","Loader","index","isLastCard","ref"],"sourceRoot":""}